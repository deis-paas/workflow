<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Development Environment - Deis Workflow Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Development Environment";
    var mkdocs_page_input_path = "contributing/development-environment.md";
    var mkdocs_page_url = "/workflow/contributing/development-environment/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42867143-3', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Deis Workflow Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Home</span>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Quick Start</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../quickstart/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../quickstart/install-cli-tools/">Install CLI Tools</a>
                </li>
                <li class="">
                    
    <span class="caption-text">AWS</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/aws/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/aws/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/aws/install-aws/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Azure</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/azure-acs/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/azure-acs/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/azure-acs/install-azure-acs/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">GKE</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/gke/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/gke/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/gke/install-gke/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Minikube</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/minikube/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/minikube/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/minikube/install-minikube/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../quickstart/deploy-an-app/">Deploy Your First App</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Understanding Workflow</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../understanding-workflow/concepts/">Concepts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../understanding-workflow/architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../../understanding-workflow/components/">Components</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Installing Workflow</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../installing-workflow/system-requirements/">System Requirements</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/">Installing Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/configuring-object-storage/">Configuring Object Storage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/configuring-postgres/">Configuring Postgres</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/configuring-registry/">Configuring the Registry</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/chart-provenance/">Chart Provenance</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/experimental-native-ingress/">Experimental Native Ingress</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Users</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../users/cli/">Command Line Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../users/registration/">Users and Registration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../users/ssh-keys/">SSH Keys</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Applications</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../applications/deploying-apps/">Deploying Apps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/using-buildpacks/">Buildpacks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/using-dockerfiles/">Dockerfiles</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/using-docker-images/">Docker Images</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-app-processes/">Managing App Processes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-app-configuration/">Managing App Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-app-lifecycle/">Managing App Lifecycle</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/inter-app-communication/">Inter-app Communication</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-resource-limits/">Resource Limits</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/domains-and-routing/">Domains and Routing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/ssl-certificates/">SSL Certificates</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Managing Workflow</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../managing-workflow/tuning-component-settings/">Tuning Component Settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/configuring-load-balancers/">Configuring Load Balancers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/configuring-dns/">Configuring DNS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/deploy-hooks/">Deploy Hooks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/platform-logging/">Platform Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/platform-monitoring/">Platform Monitoring</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/production-deployments/">Production Deployments</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/security-considerations/">Security Considerations</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/platform-ssl/">Platform SSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/upgrading-workflow/">Upgrading Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/extending-workflow/">Extending Workflow</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Troubleshooting</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../troubleshooting/">Troubleshooting Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../troubleshooting/kubectl/">Troubleshooting using Kubectl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../troubleshooting/applications/">Troubleshooting Applications</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Roadmap</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../roadmap/planning-process/">Planning Process</a>
                </li>
                <li class="">
                    
    <a class="" href="../../roadmap/roadmap/">Roadmap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../roadmap/releases/">Releases</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contributing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../overview/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../design-documents/">Design Documents</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Development Environment</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#development-environment">Development Environment</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#prerequisites">Prerequisites</a></li>
        
            <li><a class="toctree-l4" href="#fork-the-repository">Fork the Repository</a></li>
        
            <li><a class="toctree-l4" href="#make-your-changes">Make Your Changes</a></li>
        
            <li><a class="toctree-l4" href="#test-your-changes">Test Your Changes</a></li>
        
            <li><a class="toctree-l4" href="#deploying-your-changes">Deploying Your Changes</a></li>
        
            <li><a class="toctree-l4" href="#useful-commands">Useful Commands</a></li>
        
            <li><a class="toctree-l4" href="#pull-requests">Pull Requests</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../testing/">Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../submitting-a-pull-request/">Submitting a Pull Request</a>
                </li>
                <li class="">
                    
    <a class="" href="../community/">Community</a>
                </li>
                <li class="">
                    
    <a class="" href="../triaging-issues/">Triaging Issues</a>
                </li>
                <li class="">
                    
    <a class="" href="../conduct/">Conduct</a>
                </li>
                <li class="">
                    
    <a class="" href="../maintainers/">Maintainers</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Reference Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../reference-guide/migration/">Migrating from Deis v1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/creating-a-self-signed-ssl-certificate/">Creating a Self-Signed SSL Certificate</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/terms/">Terms</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.0/">Controller API v2.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.1/">Controller API v2.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.2/">Controller API v2.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.3/">Controller API v2.3</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Changelogs</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../changelogs/v2.18.0/">v2.18.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.17.0/">v2.17.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.16.0/">v2.16.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.15.0/">v2.15.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.14.0/">v2.14.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.13.0/">v2.13.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.12.0/">v2.12.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.11.0/">v2.11.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.10.0/">v2.10.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.9.1/">v2.9.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.9.0/">v2.9.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.8.0/">v2.8.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.7.0/">v2.7.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.6.0/">v2.6.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.5.0/">v2.5.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.4.2/">v2.4.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.4.1/">v2.4.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.4.0/">v2.4.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.3.0/">v2.3.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.2.0/">v2.2.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.1.0/">v2.1.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.0.0/">v2.0.0</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Deis Workflow Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Contributing &raquo;</li>
        
      
    
    <li>Development Environment</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="development-environment">Development Environment<a class="headerlink" href="#development-environment" title="Permanent link">&para;</a></h1>
<p>This document is for developers who are interested in working directly on the Deis codebase. In this guide, we walk you through the process of setting up a development environment that is suitable for hacking on most Deis components.</p>
<p>We try to make it simple to hack on Deis components. However, there are necessarily several moving pieces and some setup required. We welcome any suggestions for automating or simplifying this process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Deis team is actively engaged in containerizing Go and Python based development environments tailored specifically for Deis development in order to minimize the setup required.  This work is ongoing.  Refer to the <a href="https://github.com/deis/router">deis/router</a> project for a working example of a fully containerized development environment.</p>
</div>
<p>If you're just getting into the Deis codebase, look for GitHub issues with the label <a href="https://github.com/issues?q=user%3Adeis+label%3Aeasy-fix+is%3Aopen">easy-fix</a>. These are more straightforward or low-risk issues and are a great way to become more familiar with Deis.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>In order to successfully compile and test Deis binaries and build Docker images of Deis components, the following are required:</p>
<ul>
<li><a href="https://git-scm.com/">git</a></li>
<li>Go 1.5 or later, with support for compiling to <code>linux/amd64</code></li>
<li><a href="https://github.com/Masterminds/glide">glide</a></li>
<li><a href="https://github.com/golang/lint">golint</a></li>
<li><a href="https://github.com/koalaman/shellcheck">shellcheck</a></li>
<li><a href="https://www.docker.com/">Docker</a> (in a non-Linux environment, you will additionally want <a href="http://docs.docker.com/machine/install-machine/">Docker Machine</a>)</li>
</ul>
<p>For <a href="https://github.com/deis/controller">deis/controller</a>, in particular, you will also need:</p>
<ul>
<li>Python 2.7 or later (with <code>pip</code>)</li>
<li>virtualenv (<code>sudo pip install virtualenv</code>)</li>
</ul>
<p>In most cases, you should simply install according to the instructions. There are a few special cases, though. We cover these below.</p>
<h3 id="configuring-go">Configuring Go<a class="headerlink" href="#configuring-go" title="Permanent link">&para;</a></h3>
<p>If your local workstation does not support the <code>linux/amd64</code> target environment, you will have to install Go from source with cross-compile support for that environment. This is because some of the components are built on your local machine and then injected into a Docker container.</p>
<p>Homebrew users can just install with cross compiling support:</p>
<pre class="codehilite"><code>$ brew install go --with-cc-common</code></pre>


<p>It is also straightforward to build Go from source:</p>
<pre class="codehilite"><code>$ sudo su
$ curl -sSL https://golang.org/dl/go1.5.src.tar.gz | tar -v -C /usr/local -xz
$ cd /usr/local/go/src
$ # compile Go for our default platform first, then add cross-compile support
$ ./make.bash --no-clean
$ GOOS=linux GOARCH=amd64 ./make.bash --no-clean</code></pre>


<p>Once you can compile to <code>linux/amd64</code>, you should be able to compile Deis components as normal.</p>
<h3 id="configuring-docker-machine-mac">Configuring Docker Machine (Mac)<a class="headerlink" href="#configuring-docker-machine-mac" title="Permanent link">&para;</a></h3>
<p>Deis needs Docker for building images.  Docker utilizes a client/server architecture, and while the Docker client is available for Mac OS, the Docker server is dependent upon the Linux kernel.  Therefore, in order to use Docker on Mac OS, <a href="http://docs.docker.com/machine/install-machine/">Docker Machine</a> is used to facilitate running the Docker server within a <a href="https://www.virtualbox.org/">VirtualBox</a> VM.</p>
<p>Install Docker Machine according to the normal installation instructions, then use it to create a new VM:</p>
<pre class="codehilite"><code>$ docker-machine create deis-docker \
    --driver=virtualbox \
    --virtualbox-disk-size=100000 \
    --engine-insecure-registry 10.0.0.0/8 \
    --engine-insecure-registry 172.16.0.0/12 \
    --engine-insecure-registry 192.168.0.0/16 \
    --engine-insecure-registry 100.64.0.0/10</code></pre>


<p>This will create a new virtual machine named <code>deis-docker</code> that will take up as much as 100,000 MB of disk space. The images you build may be large, so allocating a big disk is a good idea.</p>
<p>Once the <code>deis-docker</code> machine exists, source its values into your environment so your docker client knows how to use the new machine. You may even choose to add this to your bash profile or similar.</p>
<pre class="codehilite"><code>$ eval &quot;$(docker-machine env deis-docker)&quot;</code></pre>


<p>After following these steps, some Docker Machine users report a slight delay (30 - 60 seconds) before the Docker server is ready.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In subsequent steps, you may run a Docker registry within the <code>deis-docker</code> VM. Such a registry will not have a valid SSL certificate and will use HTTP instead of HTTPS. Such registries are implicitly untrusted by the Docker server (which is also running on the <code>deis-docker</code> VM).  In order for the Docker server to trust the insecure registry, <code>deis-docker</code> is explicitly created to trust all registries in the IP ranges that that are reserved for use by private networks.  The VM (and therefore the registry) will exist within such a range.  This will effectively permit Docker pulls and pushes to such a registry.</p>
</div>
<h2 id="fork-the-repository">Fork the Repository<a class="headerlink" href="#fork-the-repository" title="Permanent link">&para;</a></h2>
<p>Once the prerequisites have been met, we can begin to work with Deis components.</p>
<p>Begin at Github by forking whichever Deis project you would like to contribute to, then clone that fork locally.  Since Deis is predominantly written in Go, the best place to put it is under <code>$GOPATH/src/github.com/deis/</code>.</p>
<pre class="codehilite"><code>$ mkdir -p  $GOPATH/src/github.com/deis
$ cd $GOPATH/src/github.com/deis
$ git clone git@github.com:&lt;username&gt;/&lt;component&gt;.git
$ cd &lt;component&gt;</code></pre>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By checking out the forked copy into the namespace <code>github.com/deis/&lt;component&gt;</code>, we are tricking the Go toolchain into seeing our fork as the "official" source tree.</p>
</div>
<p>If you are going to be issuing pull requests to the upstream repository from which you forked, we suggest configuring Git such that you can easily rebase your code to the upstream repository's master branch. There are various strategies for doing this, but the <a href="https://help.github.com/articles/fork-a-repo/">most common</a> is to add an <code>upstream</code> remote:</p>
<pre class="codehilite"><code>$ git remote add upstream https://github.com/deis/&lt;component&gt;.git</code></pre>


<p>For the sake of simplicity, you may want to point an environment variable to your Deis code - the directory containing one or more Deis components:</p>
<pre class="codehilite"><code>$ export DEIS=$GOPATH/src/github.com/deis</code></pre>


<p>Throughout the rest of this document, <code>$DEIS</code> refers to that location.</p>
<h3 id="alternative-forking-with-a-pushurl">Alternative: Forking with a Pushurl<a class="headerlink" href="#alternative-forking-with-a-pushurl" title="Permanent link">&para;</a></h3>
<p>A number of Deis contributors prefer to pull directly from <code>deis/&lt;component&gt;</code>, but push to <code>&lt;username&gt;/&lt;component&gt;</code>. If that workflow suits you better, you can set it up this way:</p>
<pre class="codehilite"><code>$ git clone git@github.com:deis/&lt;component&gt;.git
$ cd deis
$ git config remote.origin.pushurl git@github.com:&lt;username&gt;/&lt;component&gt;.git</code></pre>


<p>In this setup, fetching and pulling code will work directly with the upstream repository, while pushing code will send changes to your fork. This makes it easy to stay up to date, but also make changes and then issue pull requests.</p>
<h2 id="make-your-changes">Make Your Changes<a class="headerlink" href="#make-your-changes" title="Permanent link">&para;</a></h2>
<p>With your development environment set up and the code you wish to work on forked and cloned, you can begin making your changes.</p>
<h2 id="test-your-changes">Test Your Changes<a class="headerlink" href="#test-your-changes" title="Permanent link">&para;</a></h2>
<p>Deis components each include a comprehensive suite of automated tests, mostly written in Go. See <a href="../testing/">testing</a> for instructions on running the tests.</p>
<h2 id="deploying-your-changes">Deploying Your Changes<a class="headerlink" href="#deploying-your-changes" title="Permanent link">&para;</a></h2>
<p>Although writing and executing tests are critical to ensuring code quality, most contributors will also want to deploy their changes to a live environment, whether to make use of those changes or to test them further.  The remainder of this section documents the procedure for running officially released Deis components in a development cluster and replacing any one of those with your customizations.</p>
<h3 id="running-a-kubernetes-cluster-for-development">Running a Kubernetes Cluster for Development<a class="headerlink" href="#running-a-kubernetes-cluster-for-development" title="Permanent link">&para;</a></h3>
<p>To run a Kubernetes cluster locally or elsewhere to support your development activities, refer to Deis installation instructions <a href="../../quickstart/">here</a>.</p>
<h3 id="using-a-development-registry">Using a Development Registry<a class="headerlink" href="#using-a-development-registry" title="Permanent link">&para;</a></h3>
<p>To facilitate deploying Docker images containing your changes to your Kubernetes cluster, you will need to make use of a Docker registry.  This is a location to where you can push your custom-built images and from where your Kubernetes cluster can retrieve those same images.</p>
<p>If your development cluster runs locally (in Minikube, for instance), the most efficient and economical means of achieving this is to run a Docker registry locally <em>as</em> a Docker container.</p>
<p>To facilitate this, most Deis components provide a make target to create such a registry:</p>
<pre class="codehilite"><code>$ make dev-registry</code></pre>


<p>In a Linux environment, to begin using the registry:</p>
<pre class="codehilite"><code>export DEIS_REGISTRY=&lt;IP of the host machine&gt;:5000</code></pre>


<p>In non-Linux environments:</p>
<pre class="codehilite"><code>export DEIS_REGISTRY=&lt;IP of the deis-docker Docker Machine VM&gt;:5000/</code></pre>


<p>If your development cluster runs on a cloud provider such as Google Container Engine, a local registry such as the one above will not be accessible to your Kubernetes nodes.  In such cases, a public registry such as <a href="https://hub.docker.com/">DockerHub</a> or <a href="https://quay.io/">quay.io</a> will suffice.</p>
<p>To use DockerHub for this purpose, for instance:</p>
<pre class="codehilite"><code>$ export DEIS_REGISTRY=&quot;&quot;
$ export IMAGE_PREFIX=&lt;your DockerHub username&gt;</code></pre>


<p>To use quay.io:</p>
<pre class="codehilite"><code>$ export DEIS_REGISTRY=quay.io/
$ export IMAGE_PREFIX=&lt;your quay.io username&gt;</code></pre>


<p>Note the importance of the trailing slash.</p>
<h3 id="dev-deployment-workflow">Dev / Deployment Workflow<a class="headerlink" href="#dev-deployment-workflow" title="Permanent link">&para;</a></h3>
<p>With a functioning Kubernetes cluster and the officially released Deis components installed onto it, deployment and further testing of any Deis component you have made changes to is facilitated by replacing the officially released component with a custom built image that contains your changes.  Most Deis components include Makefiles with targets specifically intended to facilitate this workflow with minimal friction.</p>
<p>In the general case, this workflow looks like this:</p>
<ol>
<li>Update source code and commit your changes using <code>git</code></li>
<li>Use <code>make build</code> to build a new Docker image</li>
<li>Use <code>make dev-release</code> to generate Kubernetes manifest(s)</li>
<li>Use <code>make deploy</code> to restart the component using the updated manifest</li>
</ol>
<p>This can be shortened to a one-liner using just the <code>deploy</code> target:</p>
<pre class="codehilite"><code>$ make deploy</code></pre>


<h2 id="useful-commands">Useful Commands<a class="headerlink" href="#useful-commands" title="Permanent link">&para;</a></h2>
<p>Once your customized Deis component has been deployed, here are some helpful commands that will allow you to inspect your cluster and to troubleshoot, if necessary:</p>
<h3 id="see-all-deis-pods">See All Deis Pods<a class="headerlink" href="#see-all-deis-pods" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code>$ kubectl --namespace=deis get pods</code></pre>


<h3 id="describe-a-pod">Describe a Pod<a class="headerlink" href="#describe-a-pod" title="Permanent link">&para;</a></h3>
<p>This is often useful for troubleshooting pods that are in pending or crashed states:</p>
<pre class="codehilite"><code>$ kubectl --namespace=deis describe -f &lt;pod name&gt;</code></pre>


<h3 id="tail-logs">Tail Logs<a class="headerlink" href="#tail-logs" title="Permanent link">&para;</a></h3>
<pre class="codehilite"><code>$ kubectl --namespace=deis logs -f &lt;pod name&gt;</code></pre>


<h3 id="django-shell">Django Shell<a class="headerlink" href="#django-shell" title="Permanent link">&para;</a></h3>
<p>Specific to <a href="https://github.com/deis/controller">deis/controller</a></p>
<pre class="codehilite"><code>$ kubectl --namespace=deis exec -it &lt;pod name&gt; -- python manage.py shell</code></pre>


<p>Have commands other Deis contributors might find useful? Send us a PR!</p>
<h2 id="pull-requests">Pull Requests<a class="headerlink" href="#pull-requests" title="Permanent link">&para;</a></h2>
<p>Satisfied with your changes?  Share them!</p>
<p>Please read <a href="../submitting-a-pull-request/">Submitting a Pull Request</a>. It contains a checklist of
things you should do when proposing a change to any Deis component.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../testing/" class="btn btn-neutral float-right" title="Testing">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../design-documents/" class="btn btn-neutral" title="Design Documents"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../design-documents/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../testing/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../static/js/foundation.js" defer></script>
      <script src="../../static/js/foundation.dropdown.js" defer></script>
      <script src="../../static/js/foundation.offcanvas.js" defer></script>
      <script src="../../static/js/headroom.min.js" defer></script>
      <script src="../../static/js/adjustments.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
