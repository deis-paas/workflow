<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Releases - Deis Workflow Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Releases";
    var mkdocs_page_input_path = "roadmap/releases.md";
    var mkdocs_page_url = "/workflow/roadmap/releases/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42867143-3', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Deis Workflow Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Home</span>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Quick Start</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../quickstart/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../quickstart/install-cli-tools/">Install CLI Tools</a>
                </li>
                <li class="">
                    
    <span class="caption-text">AWS</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/aws/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/aws/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/aws/install-aws/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Azure</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/azure-acs/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/azure-acs/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/azure-acs/install-azure-acs/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">GKE</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/gke/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/gke/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/gke/install-gke/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Minikube</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/minikube/boot/">Boot</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/minikube/dns/">DNS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../quickstart/provider/minikube/install-minikube/">Install Workflow</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../quickstart/deploy-an-app/">Deploy Your First App</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Understanding Workflow</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../understanding-workflow/concepts/">Concepts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../understanding-workflow/architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../../understanding-workflow/components/">Components</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Installing Workflow</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../installing-workflow/system-requirements/">System Requirements</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/">Installing Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/configuring-object-storage/">Configuring Object Storage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/configuring-postgres/">Configuring Postgres</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/configuring-registry/">Configuring the Registry</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/chart-provenance/">Chart Provenance</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installing-workflow/experimental-native-ingress/">Experimental Native Ingress</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Users</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../users/cli/">Command Line Interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../users/registration/">Users and Registration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../users/ssh-keys/">SSH Keys</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Applications</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../applications/deploying-apps/">Deploying Apps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/using-buildpacks/">Buildpacks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/using-dockerfiles/">Dockerfiles</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/using-docker-images/">Docker Images</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-app-processes/">Managing App Processes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-app-configuration/">Managing App Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-app-lifecycle/">Managing App Lifecycle</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/inter-app-communication/">Inter-app Communication</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/managing-resource-limits/">Resource Limits</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/domains-and-routing/">Domains and Routing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../applications/ssl-certificates/">SSL Certificates</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Managing Workflow</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../managing-workflow/tuning-component-settings/">Tuning Component Settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/configuring-load-balancers/">Configuring Load Balancers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/configuring-dns/">Configuring DNS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/deploy-hooks/">Deploy Hooks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/platform-logging/">Platform Logging</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/platform-monitoring/">Platform Monitoring</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/production-deployments/">Production Deployments</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/security-considerations/">Security Considerations</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/platform-ssl/">Platform SSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/upgrading-workflow/">Upgrading Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../managing-workflow/extending-workflow/">Extending Workflow</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Troubleshooting</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../troubleshooting/">Troubleshooting Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../troubleshooting/kubectl/">Troubleshooting using Kubectl</a>
                </li>
                <li class="">
                    
    <a class="" href="../../troubleshooting/applications/">Troubleshooting Applications</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Roadmap</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../planning-process/">Planning Process</a>
                </li>
                <li class="">
                    
    <a class="" href="../roadmap/">Roadmap</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Releases</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#releases">Releases</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#components-release-as-needed">Components Release as Needed</a></li>
        
            <li><a class="toctree-l4" href="#workflow-releases-each-month">Workflow Releases Each Month</a></li>
        
            <li><a class="toctree-l4" href="#semantic-versioning">Semantic Versioning</a></li>
        
            <li><a class="toctree-l4" href="#how-to-release-a-component">How to Release a Component</a></li>
        
            <li><a class="toctree-l4" href="#how-to-release-workflow">How to Release Workflow</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contributing</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../contributing/overview/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/design-documents/">Design Documents</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/development-environment/">Development Environment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/testing/">Testing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/submitting-a-pull-request/">Submitting a Pull Request</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/community/">Community</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/triaging-issues/">Triaging Issues</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/conduct/">Conduct</a>
                </li>
                <li class="">
                    
    <a class="" href="../../contributing/maintainers/">Maintainers</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Reference Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../reference-guide/migration/">Migrating from Deis v1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/creating-a-self-signed-ssl-certificate/">Creating a Self-Signed SSL Certificate</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/terms/">Terms</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.0/">Controller API v2.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.1/">Controller API v2.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.2/">Controller API v2.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../reference-guide/controller-api/v2.3/">Controller API v2.3</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Changelogs</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../changelogs/v2.18.0/">v2.18.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.17.0/">v2.17.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.16.0/">v2.16.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.15.0/">v2.15.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.14.0/">v2.14.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.13.0/">v2.13.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.12.0/">v2.12.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.11.0/">v2.11.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.10.0/">v2.10.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.9.1/">v2.9.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.9.0/">v2.9.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.8.0/">v2.8.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.7.0/">v2.7.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.6.0/">v2.6.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.5.0/">v2.5.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.4.2/">v2.4.2</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.4.1/">v2.4.1</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.4.0/">v2.4.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.3.0/">v2.3.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.2.0/">v2.2.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.1.0/">v2.1.0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../changelogs/v2.0.0/">v2.0.0</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Deis Workflow Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Roadmap &raquo;</li>
        
      
    
    <li>Releases</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="releases">Releases<a class="headerlink" href="#releases" title="Permanent link">&para;</a></h1>
<p>Deis uses a <a href="https://en.wikipedia.org/wiki/Continuous_delivery">continuous delivery</a> approach for creating releases. Every merged commit that passes
testing results in a deliverable that can be given a <a href="http://semver.org">semantic version</a> tag and shipped.</p>
<p>The master <code>git</code> branch of a project should always work. Only changes considered ready to be
released publicly are merged.</p>
<h2 id="components-release-as-needed">Components Release as Needed<a class="headerlink" href="#components-release-as-needed" title="Permanent link">&para;</a></h2>
<p>Deis components release new versions as often as needed. Fixing a high priority bug requires the
project maintainer to create a new patch release. Merging a backward-compatible feature implies
a minor release.</p>
<p>By releasing often, each component release becomes a safe and routine event. This makes it faster
and easier for users to obtain specific fixes. Continuous delivery also reduces the work
necessary to release a product such as Deis Workflow, which integrates several components.</p>
<p>"Components" applies not just to Deis Workflow projects, but also to development and release
tools, to Docker base images, and to other Deis projects that do <a href="http://semver.org">semantic version</a> releases.</p>
<p>See "<a href="#how-to-release-a-component">How to Release a Component</a>" for more detail.</p>
<h2 id="workflow-releases-each-month">Workflow Releases Each Month<a class="headerlink" href="#workflow-releases-each-month" title="Permanent link">&para;</a></h2>
<p>Deis Workflow has a regular, public release cadence. From v2.8.0 onward, new Workflow feature
releases arrive on the first Thursday of each month. Patch releases are created at any time,
as needed. GitHub milestones are used to communicate the content and timing of major and minor
releases, and longer-term planning is visible at <a href="../roadmap/">the Roadmap</a>.</p>
<p>Workflow release timing is not linked to specific features. If a feature is merged before the
release date, it is included in the next release.</p>
<p>See "<a href="#how-to-release-workflow">How to Release Workflow</a>" for more detail.</p>
<h2 id="semantic-versioning">Semantic Versioning<a class="headerlink" href="#semantic-versioning" title="Permanent link">&para;</a></h2>
<p>Deis releases comply with <a href="http://semver.org">semantic versioning</a>, with the "public API" broadly
defined as:</p>
<ul>
<li>REST, gRPC, or other API that is network-accessible</li>
<li>Library or framework API intended for public use</li>
<li>"Pluggable" socket-level protocols users can redirect</li>
<li>CLI commands and output formats</li>
</ul>
<p>In general, changes to anything a user might reasonably link to, customize, or integrate with
should be backward-compatible, or else require a major release. Deis users can be confident that
upgrading to a patch or to a minor release will not break anything.</p>
<h2 id="how-to-release-a-component">How to Release a Component<a class="headerlink" href="#how-to-release-a-component" title="Permanent link">&para;</a></h2>
<p>Most Deis projects are "components" which produce a Docker image or binary executable as a
deliverable. This section leads a maintainer through creating a component release.</p>
<h3 id="step-1-update-code-and-run-the-release-tool">Step 1: Update Code and Run the Release Tool<a class="headerlink" href="#step-1-update-code-and-run-the-release-tool" title="Permanent link">&para;</a></h3>
<p>Major or minor releases should happen on the master branch. Patch releases
should check out the previous release tag and cherry-pick specific commits from master.</p>
<p><strong>Note:</strong> if a patch release, the release artifact will have to be manually promoted by triggering
the <a href="https://ci.deis.io/job/component-promote">component-promote</a> job with the following values:</p>
<pre class="codehilite"><code class="language-bash">COMPONENT_NAME=&lt;component name&gt;
COMPONENT_SHA=&lt;patch commit sha&gt;</code></pre>


<p>Make sure you have the <a href="https://github.com/deis/deisrel">deisrel</a> release tool in your search <code>$PATH</code>.</p>
<p>Run <code>deisrel release</code> once with a fake semver tag to proofread the changelog content. (If <code>HEAD</code>
of master is not what is intended for the release, add the <code>--sha</code> flag as described
in <code>deisrel release --help</code>.)</p>
<pre class="codehilite"><code class="language-bash">$ deisrel release controller v0.0.0
Doing a dry run of the component release...
skipping commit 943a49267eeb28546819a266654806cfcbae0e38

Creating changelog for controller with tag v2.8.1 through commit 943a49267eeb28546819a266654806cfcbae0e38

### v2.8.1 -&gt; v0.0.0

#### Fixes

- [`615b834`](https://github.com/deis/controller/commit/615b834f39cb68a854cc1f1e2f0f82d862ea2731) boot: Ensure DEIS_DEBUG==true for debug output</code></pre>


<p>Based on the changelog content, determine whether the component deserves a minor or patch
release. Run the command again with that semver tag and <code>--dry-run=false</code>. You will still be
asked for confirmation before the release is created:</p>
<pre class="codehilite"><code class="language-bash">$ deisrel release controller v2.8.2 --dry-run=false
skipping commit 943a49267eeb28546819a266654806cfcbae0e38

Creating changelog for controller with tag v2.8.1 through commit 943a49267eeb28546819a266654806cfcbae0e38

### v2.8.1 -&gt; v2.8.2


#### Fixes

- [`615b834`](https://github.com/deis/controller/commit/615b834f39cb68a854cc1f1e2f0f82d862ea2731) boot: Ensure DEIS_DEBUG==true for debug output


Please review the above changelog contents and ensure:
  1. All intended commits are mentioned
  2. The changes agree with the semver release tag (major, minor, or patch)

Create release for Deis Controller v2.8.2? [y/n]: y
New release is available at https://github.com/deis/controller/releases/tag/v2.8.2</code></pre>


<h3 id="step-2-verify-the-component-is-available">Step 2: Verify the Component is Available<a class="headerlink" href="#step-2-verify-the-component-is-available" title="Permanent link">&para;</a></h3>
<p>Tagging the component (see <a href="/roadmap/releases/#step-1-update-code-and-run-the-release-tool">Step 1</a>)
starts a CI job that eventually results in an artifact being made available for public download.
Please see the <a href="https://github.com/deis/jenkins-jobs/#flow">CI flow diagrams</a> for details.</p>
<p>Double-check that the artifact is available, either by a <code>docker pull</code> command or by running the
appropriate installer script.</p>
<p>If the artifact can't be downloaded, ensure that its CI release jobs are still in progress, or
fix whatever issue arose in the pipeline. For example, the
<a href="https://github.com/deis/jenkins-jobs/#when-a-component-pr-is-merged-to-master">master merge pipeline</a>
may have failed to promote the <code>:git-abc1d23</code> candidate image and needs to be restarted with
that component and commit.</p>
<p>If the component has a correlating <a href="https://github.com/kubernetes/helm">Kubernetes Helm</a> chart,
this chart will also be packaged, signed and uploaded to its production chart repo.  Please
verify it can be fetched (and verified):</p>
<pre class="codehilite"><code>$ helm repo add controller https://charts.deis.com/controller
&quot;controller&quot; has been added to your repositories
$ helm fetch --verify controller/controller --version v2.18.0
Verification: &amp;{0xc4207686e0 sha256:6dc81e7ce50508ef82b171e5c27b74d8c2ea6fe19f201bf346092dae66bd70d1 controller-v2.18.0.tgz}</code></pre>


<h2 id="how-to-release-workflow">How to Release Workflow<a class="headerlink" href="#how-to-release-workflow" title="Permanent link">&para;</a></h2>
<p>Deis Workflow integrates multiple component releases together with a <a href="https://github.com/kubernetes/helm">Kubernetes Helm</a> chart
deliverable. This section leads a maintainer through creating a Workflow release.</p>
<h3 id="step-1-set-environment-variables">Step 1: Set Environment Variables<a class="headerlink" href="#step-1-set-environment-variables" title="Permanent link">&para;</a></h3>
<p>Export two environment variables that will be used in later steps:</p>
<pre class="codehilite"><code class="language-bash">export WORKFLOW_RELEASE=v2.18.0 WORKFLOW_PREV_RELEASE=v2.17.0  # for example</code></pre>


<h3 id="step-2-tag-supporting-repositories">Step 2: Tag Supporting Repositories<a class="headerlink" href="#step-2-tag-supporting-repositories" title="Permanent link">&para;</a></h3>
<p>Some Workflow components not in the Helm chart must also be tagged in sync with the release.
Follow the <a href="#how-to-release-a-component">component release process</a> above and ensure that
these components are tagged:</p>
<ul>
<li><a href="https://github.com/deis/workflow-cli">deis/workflow-cli</a></li>
<li><a href="https://github.com/deis/workflow-e2e">deis/workflow-e2e</a></li>
</ul>
<p>The version number for <a href="https://github.com/deis/workflow-cli">deis/workflow-cli</a> should always match the overall Workflow version
number.</p>
<h3 id="step-3-create-helm-chart">Step 3: Create Helm Chart<a class="headerlink" href="#step-3-create-helm-chart" title="Permanent link">&para;</a></h3>
<p>To create and stage a release candidate chart for Workflow, we will build the <a href="https://ci.deis.io/job/workflow-chart-stage">workflow-chart-stage</a> job with the following parameters:</p>
<p><code>RELEASE_TAG=$WORKFLOW_RELEASE</code></p>
<p>This job will gather all of the latest component release tags and use these to specify the versions of all component charts.
It will then package the Workflow chart, upload it to the staging chart repo and kick off an e2e run against said chart.</p>
<h3 id="step-4-manual-testing">Step 4: Manual Testing<a class="headerlink" href="#step-4-manual-testing" title="Permanent link">&para;</a></h3>
<p>Now it's time to go above and beyond current CI tests. Create a testing matrix spreadsheet (copying
from the previous document is a good start) and sign up testers to cover all permutations.</p>
<p>Testers should pay special attention to the overall user experience, make sure upgrading from
earlier versions is smooth, and cover various storage configurations and Kubernetes versions and
infrastructure providers.</p>
<p>When showstopper-level bugs are found, the process is as follows:</p>
<ol>
<li>Create a component PR that fixes the bug.</li>
<li>Once the PR passes and is reviewed, merge it and do a new
  <a href="#how-to-release-a-component">component release</a></li>
<li>Trigger the same <code>workflow-chart-stage</code> job as mentioned in Step 3 to upload the newly-generated Workflow release candidate chart to staging.</li>
</ol>
<h3 id="step-5-release-the-chart">Step 5: Release the Chart<a class="headerlink" href="#step-5-release-the-chart" title="Permanent link">&para;</a></h3>
<p>When testing has completed without uncovering any new showstopper bugs, kick off the <a href="https://ci.deis.io/job/workflow-chart-release">workflow-chart-release</a> job with the following parameter:</p>
<p><code>RELEASE_TAG=$WORKFLOW_RELEASE</code></p>
<p>This job will copy the release candidate chart (now approved by CI and manual testing) from the staging repo to the production repo, signing
it if it has not done so already.</p>
<h3 id="step-6-assemble-master-changelog">Step 6: Assemble Master Changelog<a class="headerlink" href="#step-6-assemble-master-changelog" title="Permanent link">&para;</a></h3>
<p>Each component already updated its release notes on GitHub with CHANGELOG content. We'll now
generate the master changelog for the Workflow chart, consisting of all component and auxilliary repo changes.</p>
<p>We'll employ the <code>requirements.lock</code> file from the <code>WORKFLOW_PREV_RELEASE</code> chart, as well as a repo-to-chart-name <a href="https://github.com/deis/deisrel/blob/master/map.json">mapping file</a>, this time invoking <code>deisrel changelog global</code> to get all component changes between
the chart versions existing in the <code>WORKFLOW_PREV_RELEASE</code> chart and the <em>most recent</em> releases existing in GitHub.
(Therefore, if there are any unreleased commits in a component repo, they will not appear here):</p>
<pre class="codehilite"><code class="language-bash">helm repo add deis https://charts.deis.com/workflow
helm fetch --untar deis/workflow --version $WORKFLOW_PREV_RELEASE
deisrel changelog global workflow/requirements.lock map.json &gt; changelog-$WORKFLOW_RELEASE.md</code></pre>


<p>This master changelog should then be placed into a single gist.  The file will also be added to the documentation
update PR created in the next step.</p>
<h3 id="step-7-update-documentation">Step 7: Update Documentation<a class="headerlink" href="#step-7-update-documentation" title="Permanent link">&para;</a></h3>
<p>Create a new pull request at <a href="https://github.com/deis/workflow">deis/workflow</a> that updates version references to the new release.
Use <code>git grep $WORKFLOW_PREV_RELEASE</code> to find any references, but be careful not to change
<code>CHANGELOG.md</code>.</p>
<p>Place the <code>$WORKFLOW_RELEASE</code> master changelog generated in Step 7 in the <code>changelogs</code> directory.
Make sure to add a header to the page to make it clear that this is for a Workflow release, e.g.:</p>
<pre class="codehilite"><code>## Workflow v2.17.0 -&gt; v2.18.0</code></pre>


<p>Once the PR has been reviewed and merged, do a <a href="#how-to-release-a-component">component release</a> of
<a href="https://github.com/deis/workflow">deis/workflow</a> itself. The version number for <a href="https://github.com/deis/workflow">deis/workflow</a> should always match the
overall Workflow version number.</p>
<h3 id="step-8-close-github-milestones">Step 8: Close GitHub Milestones<a class="headerlink" href="#step-8-close-github-milestones" title="Permanent link">&para;</a></h3>
<p>Create a pull request at <a href="https://github.com/deis/seed-repo">seed-repo</a> to close the release
milestone and create the next one. When changes are merged to seed-repo, milestones on all
relevant projects will be updated. If there are open issues attached to the milestone, move them
to the next upcoming milestone before merging the pull request.</p>
<p>Milestones map to Deis Workflow releases in <a href="https://github.com/deis/workflow">deis/workflow</a>. These milestones do not correspond
to individual component release tags.</p>
<h3 id="step-9-release-workflow-cli-stable">Step 9: Release Workflow CLI Stable<a class="headerlink" href="#step-9-release-workflow-cli-stable" title="Permanent link">&para;</a></h3>
<p>Now that the <code>$WORKFLOW_RELEASE</code> version of Workflow CLI has been vetted, we can push <code>stable</code> artifacts based on this version.</p>
<p>Kick off https://ci.deis.io/job/workflow-cli-build-stable/ with the <code>TAG</code> build parameter of <code>$WORKFLOW_RELEASE</code>
and then verify <code>stable</code> artifacts are available and appropriately updated after the job completes:</p>
<pre class="codehilite"><code>$ curl -sSL http://deis.io/deis-cli/install-v2.sh | bash
$ ./deis version
# (Should show $WORKFLOW_RELEASE)</code></pre>


<h3 id="step-10-let-everyone-know">Step 10: Let Everyone Know<a class="headerlink" href="#step-10-let-everyone-know" title="Permanent link">&para;</a></h3>
<p>Let the rest of the team know they can start blogging and tweeting about the new Workflow release.
Post a message to the #company channel on Slack. Include a link to the released chart and to the
master CHANGELOG:</p>
<pre class="codehilite"><code>@here Deis Workflow v2.18.0 is now live!
Master CHANGELOG: https://deis.com/docs/workflow/changelogs/v2.18.0/</code></pre>


<p>You're done with the release. Nice job!</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../contributing/overview/" class="btn btn-neutral float-right" title="Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../roadmap/" class="btn btn-neutral" title="Roadmap"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../roadmap/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../contributing/overview/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../static/js/foundation.js" defer></script>
      <script src="../../static/js/foundation.dropdown.js" defer></script>
      <script src="../../static/js/foundation.offcanvas.js" defer></script>
      <script src="../../static/js/headroom.min.js" defer></script>
      <script src="../../static/js/adjustments.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
